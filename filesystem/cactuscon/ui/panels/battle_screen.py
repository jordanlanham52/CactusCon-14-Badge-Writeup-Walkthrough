# Decompiled from: fs_image/cactuscon/ui/panels/battle_screen.py
# This is a best-effort reconstruction from MicroPython bytecode.
# Some complex logic may be approximate or incomplete.

lv = lvgl
time = time
gc = gc
const = const
BasePanel = BasePanel
get_screen_size = get_screen_size
get_move = get_move
MOVE_CAT_SUPPORT = MOVE_CAT_SUPPORT
MOVE_CAT_RECOVERY = MOVE_CAT_RECOVERY
get_character = get_character
prefs = prefs
config = config
evict_sprite_cache = evict_sprite_cache
BATTLE_UI_INIT = 0
BATTLE_UI_SELECTING = 1
BATTLE_UI_WAITING = 2
BATTLE_UI_RESOLVING = 3
BATTLE_UI_RESULT = 4
MOVE_SELECT_TIMEOUT_MS = 20000
COLOR_HP_FULL = 65280
COLOR_HP_MEDIUM = 16776960
COLOR_HP_LOW = 16711680
COLOR_TIMEOUT_BAR = 4491519
COLOR_YOUR_TURN = 65280
COLOR_WAITING = 16755200
COLOR_BG_DARK = 1710638
COLOR_BG_PANEL = 2763338
PLAYER_SPRITE_DIMENSION = 64
BattlePanel = __build_class__(<func_0>, 'BattlePanel', BasePanel)
__init__ = 0
_create_combatant_areas = <func_1>
_create_battle_log = (0, 0)
_create_action_area = <func_3>
_create_move_buttons = <func_4>
_create_default_move_buttons = <func_5>
_update_hp_bar = <func_6>
_update_turn_ui = (None)
_update_timeout_bar = <func_8>
on_show = <func_9>
_sync_from_battle_manager = <func_10>
_on_move_clicked = <func_11>
_on_move_timeout = <func_12>
_create_exit_button = <func_13>
_on_exit_clicked = <func_14>
create_ui = <func_15>
add_battle_log = <func_16>
update = <func_17>
on_hide = <func_18>
_clear_battle_result_ui = <func_19>
start_turn = (None)
on_back_pressed = 0
on_battle_end = (None)
_load_default_icons = <func_23>
_set_icon_from_sprite = <func_24>
_set_placeholder_icon = <func_25>
_clear_dynamic_icons = <func_26>
return 0
1.ui_state = 0
1.player_name = 'Player'
7 = config.PLAYER_CHARACTER_ID
8 = get_character(7)
1.player_character_name = 8.name
1.player_hp = 8.base_stats.hp
1.player_max_hp = 8.base_stats.max_hp
1.player_character_name = 'Hacktarmon'
1.player_hp = 100
1.player_max_hp = 100
1.opponent_name = 'Opponent'
1.opponent_hp = 100
1.opponent_max_hp = 100
1.opponent_character_name = 'Deeno'
1.is_our_turn = False
1.turn_start_time = 0
1.timeout_ms = config.BATTLE_MOVE_TIMEOUT_MS
1.move_selected = False
1.available_moves = []
1.move_buttons = []
1.button_to_move_id = {}
1.battle_log_messages = []
1.max_log_messages = 4
1._icon_sprites = {}
1._icon_img_dsc = {}
1._icon_img_data = {}
1._icon_sprite_paths = {}
3 = 0.screen
4 = 100
5 = 8
6 = 3
7 = 3
8 = 3
9 = 3
10 = 3
11 = 3
12 = 3
13 = 8
14 = 72
15 = 3
6 = 1
7 = 6
4 = 0.screen
5 = 1(2, 40)
6 = 8
7 = 4
8 = 12
9 = 0
10 = 0
11 = 2
12 = 30
13 = 4
14 = ['Atk1', 'Atk2', 'Def1', 'Def2']
15 = 0
0.button_to_move_id = {}
2 = None(4)
3 = 1
4 = 2
5 = 3.id
5 = 2
6 = 'Move'
6 = 16
7 = 0
8 = 7
9 = (MOVE_CAT_SUPPORT, MOVE_CAT_RECOVERY)
9 = False
10 = 16724787
7 = 0
8 = 7
2 = len(1)
0.available_moves = 1
1 = []
2 = [0, 1, 2, 3]
3 = get_move(2)
5 = 0
6 = 1
7 = COLOR_HP_FULL
7 = COLOR_HP_MEDIUM
7 = COLOR_HP_LOW
0.is_our_turn = 1
3 = 'turn_indicator'
4 = 0.move_buttons
5 = 'status_message'
1 = 0.turn_start_time
2 = 1
3 = 0.timeout_ms(100)
4 = 1000
0.ui_state = 0
0.move_selected = False
0.battle_log_messages = []
0.turn_start_time = 0
0.ready_to_play = False
1 = []
1 = 0.battle_manager
0.opponent_name = 'Opponent'
0.player_name = 'Player'
0.player_hp = 100
0.player_max_hp = 100
0.opponent_hp = 100
0.opponent_max_hp = 100
0.player_character_name = 0.player_character_name
0.opponent_character_name = 0.opponent_character_name
2 = [0, 1, 2, 3]
3 = []
4 = 2
5 = get_move(4)
2 = 1
3 = 0
0.move_selected = True
0.ui_state = 2
4 = get_move(3)
5 = 3
0.move_selected = False
1 = 0.id
1 = 0
1 = 0
0.move_selected = True
1 = 'action_container'
2 = 1
3 = 2
1 = get_screen_size(0.screen)
2 = 'BattlePanel.create_ui() starting...'
3 = 100
4 = 3
2 = 0.battle_log_messages
1 = 0.battle_manager
2 = 0.player_hp
3 = 0.opponent_hp
0.player_hp = 2
0.opponent_hp = 3
0.ui_state = 2
0.move_selected = False
0.ui_state = 1
0.turn_start_time = time
4 = getattr(0.battle_manager, 'ready_handshake_complete', False)
5 = 0.move_selected
0.button_to_move_id = {}
0.ready_to_play = False
1 = 'status_message'
0.is_our_turn = True
0.move_selected = False
0.timeout_ms = config.BATTLE_MOVE_TIMEOUT_MS
0.turn_start_time = time
0.ui_state = 1
0.ready_to_play = True
return True
0.ui_state = 4
2 = {}
0.player_hp = 0.player_hp
0.opponent_hp = 0.opponent_hp
0.player_max_hp = 0.player_max_hp
0.opponent_max_hp = 0.opponent_max_hp
3 = 0.battle_manager
0.player_hp = 0.player_hp
0.opponent_hp = 0.opponent_hp
0.player_max_hp = 0.player_max_hp
0.opponent_max_hp = 0.opponent_max_hp
4 = 'BATTLE VOID'
5 = 16737894
6 = 'Unknown error'
4 = 'VICTORY!'
5 = 65280
6 = 0
4 = 'DEFEAT'
5 = 16729156
6 = 0
4 = 'DRAW'
5 = 16755200
6 = 'Battle ended in a draw!'
7 = 0.move_buttons
8 = 'moves_container'
9 = 8
10 = 'status_message'
11 = 0.opponent_hp
1 = get_character(config.PLAYER_CHARACTER_ID)
2 = Exception
1 = None
2 = None
4 = 1
5 = 0._icon_img_data
2 = 1
1 = list(0._icon_images)
0._icon_sprites = {}
0._icon_images = {}
0._icon_img_dsc = {}
0._icon_img_data = {}
0._icon_sprite_paths = {}
2 = ('player_sprite', 'opponent_sprite')
3 = 2